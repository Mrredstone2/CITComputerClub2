---
layout: default
permalink: /admin/attandance
---
<body>
<div class="flex">
  <input type="text" enctype="multipart/form-data" placeholder="First name" name="fname" id="fname">
  <input type="text" enctype="multipart/form-data" placeholder="Last name" name="lname" id="lname">
</div>

<button id="loadinfo">Load Data</button>

<ul id ="list">
</ul>

<script type = "text/javascript">
   function getCookie(cname) {
  let name = cname + "=";
  let decodedCookie = decodeURIComponent(document.cookie);
  let ca = decodedCookie.split(';');
  for(let i = 0; i <ca.length; i++) {
    let c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
}
  async function getData(fname, lname){
    
   return fetch("68.183.115.192:443/admin/attendance", 
                        {method: "POST", 
                           body: JSON.stringify({
                             "first_name": fname,
                             "last_name": lname,
                             "cookie": getCookie("User")
                           }),
                           headers: {'Content-Type': 'application/json',
                                      'Accept': 'application/json'}})
  }
  function loadUser(){
    console.log("trigger");
  var fname = document.getElementById("fname").value;
  var lname = document.getElementById("lname").value; 
  var data = JSON.parse(getData(fname, lname).text());
  var times = data.dates
  var list = document.getElementById("list");
    alert(list);
  
  for(var i = 0; i <  times.length; i++){
    var item = document.createElelmet("li");
    item.innerHTML = times[i];
    list.appendChild(item);
  }    
  }
  
  
     document.getElementById("loadinfo").addEventListener("click", loadUser);
</script>
</body>
