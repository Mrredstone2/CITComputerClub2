---
layout: default
permalink: /admin/usrinfo
---
<body>
<div class="flex">
  <input type="text" enctype="multipart/form-data" placeholder="Name" name="name" id="name" list="names">
    <datalist id="names">
    </datalist>

</div>

<button id="loadinfo">Load Data</button>

 <form id="usrform" style="display: none;">
    <label for="fname"><b>First Name</b></label>
    <input type="text" placeholder="First Name" name="fname" id="fname" readonly>
    
    <label for="lname"><b>Last Name</b></label>
    <input type="text" placeholder="Last Name" name="lname" id="lname" readonly>
    
    <label for="email"><b>Email</b></label>
    <input type="text" placeholder="Email" name="email" id="email" readonly>
    
    <label for="cshs"><b>Part of CSHS</b></label>
    <input type="checkbox" name="cshs" id="cshs" value="CSHS_Member" readonly>
    
    <label for="admin"><b>Has Admin Privileges</b></label>
    <input type="checkbox" name="admin" id="adminss" value="ADMIN" readonly>

    
  </form>

<script type = "text/javascript">
   function getCookie(cname) {
  let name = cname + "=";
  let decodedCookie = decodeURIComponent(document.cookie);
  let ca = decodedCookie.split(';');
  for(let i = 0; i <ca.length; i++) {
    let c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
}
function loadUser(){
  
  console.log(res);
  var inp = document.getElementById("name").value.toLowerCase();
  var dummy = "";
  
  for (var i = 0; i < res.length; i++){
    dummy = res[i].first_name + " " + res[i].last_name;
    if (inp == dummy.toLowerCase()){
      
      
      document.getElementById("usrform").style = "display: block";
      
      
       document.getElementById("fname").value = res[i].first_name;
       document.getElementById("lname").value = res[i].last_name;
       document.getElementById("email").value = res[i].email;

       if (res[i].CSHS == "CSHS_Member"){
       document.getElementById("cshs").checked = true
       }else{document.getElementById("cshs").checked = false}
       if (res[i].user_type == "ADMIN"){
       document.getElementById("adminss").checked = true
       } else{document.getElementById("adminss").checked = false}
      
    }
  }
  
  }
  
  var myHeaders = new Headers();
myHeaders.append("token", getCookie("User"));
 
var requestOptions = {
  method: 'GET',
  headers: myHeaders,
  redirect: 'follow'
};
fetch("https://computerclub.duckdns.org/admin/users", requestOptions)
  .then(response => response.text())
  .then(result => {res = result;

    var dummy = {};
    res = JSON.parse(res).data;
    var dumdum = "";
    var name = [];


    for (var i = 0; i<res.length; i++){
      dummy = res[i];
      dumdum = dummy.first_name + " " + dummy.last_name;
      name.push(dumdum.toLowerCase());
      var elementname = document.createElement("option");
      elementname.value = dummy.first_name + " " + dummy.last_name;
      var card = document.getElementById("names")
      card.appendChild(elementname);
    }
  })
  .catch(error => console.log('error', error));
  
     document.getElementById("loadinfo").addEventListener("click", loadUser);
</script>
</body>
